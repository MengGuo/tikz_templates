\documentclass{article}


\usepackage{tikz}
\usepackage[active,tightpage]{preview}
\usetikzlibrary{automata, shapes}
\PreviewEnvironment{tikzpicture}
\setlength\PreviewBorder{0pt}
\usetikzlibrary{hobby,backgrounds,calc}
\tikzstyle{cblue}=[circle, draw, thin,fill=cyan!20, scale=0.8,inner sep=0.7pt]
\tikzset{>=latex}



\begin{document}


%http://tex.stackexchange.com/questions/70999/highlight-a-group-of-nodes-in-a-tikz-tree



%http://www.texample.net/tikz/examples/p2p-topology/

\begin{tikzpicture}[auto, thick]
 % nodes
  \node[cblue,] (s0) at (-2.5,0.65) {$s_0$};
  \node[cblue,] (s1) at (-1.75,-0.2) {$s_1$};
  \node[cblue,] (s2) at (-1.2,0.7) {$s_2$};
  \node[cblue,] (s3) at (-0.75,-0.35) {$s_3$};
  \node[cblue,] (s4) at (-0.35,0.15) {$s_4$};
  \node[cblue,] (s5) at (0.25,0.7) {$s_5$};
  \node[cblue,accepting] (s6) at (0.75,-0.3) {$s_6$};
  \node[cblue,] (s7) at (1.5,0) {$s_7$};
  \node[cblue,accepting] (s8) at (2.5,0.5) {$s_8$};
  \node[cblue,] (s9) at (0.2,-0.35) {$s_9$};
  \node[cblue,accepting] (s10) at (1.2,0.5) {$s_{10}$};


 % edges
  \path[thin,->] (s0) edge (s1);
  \path[thin,->] (s0) edge (s2);
  \path[thin,->] (s2) edge (s5);
  \path[thin,->] (s1) edge (s3);
  \path[thin,->] (s4) edge (s5);
  \path[thin,->] (s4) edge (s1);
  \path[thin,->] (s4) edge (s3);
  \path[thin,<->] (s5) edge (s6);
  \path[thin,<->] (s5) edge (s10);
  \path[thin,<->] (s6) edge (s10);
  \path[thin,->] (s2) edge (s7);
  \path[thin,<->] (s7) edge (s8);
  \path[thin,->] (s4) edge (s9);
  \path[thin,->] (s2) edge (s3);

 % partitions
  \begin{pgfonlayer}{background}
  \draw[red,fill=red,opacity=0.5](s0.west) to[closed,curve through={($(s0.south west)!0.5!(s1.south west)$) .. (s1.south)  .. ($(s1.south)!0.5!(s3.south west)$) .. (s3.south) .. ($(s3.east)!0.5!(s2.north east)$) .. (s2.south east) .. ($(s2.south east)!0.5!(s5.south west)$) .. ($(s5.south west)!0.5!(s6.west)$) .. (s6.south) .. (s7.south) .. (s8.east) .. ($(s8.north east)!0.5!(s5.north east)$) .. (s5.north) .. ($(s5.north west)!0.5!(s2.north east)$) .. (s2.north) .. ($(s2.north west)!0.5!(s0.north east)$) .. (s0.north west)}] (s0.west);
  \draw[blue,fill=blue,opacity=0.5](s5.west) to[closed,curve through={($(s5.south west)!0.5!(s6.west)$) .. (s6.south) .. (s7.south) .. (s7.south) .. ($(s7.south east)!0.5!(s8.east)$) .. (s8.east) .. ($(s8.north east)!0.5!(s5.north east)$)}](s5.north);
  \draw[orange,fill=orange,opacity=0.5](s4.west) to[closed,curve through={($(s4.south west)!0.5!(s9.south west)$) .. (s9.south) .. (s9.south east) .. (s9.east) .. ($(s9.north east)!0.5!(s4.north east)$) .. (s4.north)}](s4.west);
  \draw[green,fill=green,opacity=0.5](s0.west) to[closed,curve through={($(s0.south west)!0.5!(s2.south west)$) .. (s2.south) .. (s2.south east) .. (s2.east) .. ($(s2.north east)!0.5!(s0.north east)$) .. (s0.north)}](s0.west);
  \draw[black,fill=black,opacity=0.5](s1.west) to[closed,curve through={($(s1.south west)!0.5!(s3.south west)$) .. (s3.south) .. (s3.south east) .. (s3.east) .. ($(s3.north east)!0.5!(s1.north east)$) .. (s1.north)}](s1.west);
  \end{pgfonlayer}

\node[rectangle, rounded corners, fill=red, opacity=0.5, minimum width=0.5cm, minimum height=0.2cm, label=right:$S_r$] at (-2.3,1.4){};

\node[rectangle, rounded corners, fill=blue, opacity=0.5, minimum width=0.5cm, minimum height=0.2cm, label=right:$S_c$] at (-1.2,1.4){};

\node[rectangle, rounded corners, fill=orange, opacity=0.5, minimum width=0.5cm, minimum height=0.2cm, label=right:$S_o$] at (-0.1,1.4){};

\node[rectangle, rounded corners, fill=green, opacity=0.5, minimum width=0.5cm, minimum height=0.2cm, label=right:$S_n$] at (1.0,1.4){};

\node[rectangle, rounded corners, fill=black, opacity=0.5, minimum width=0.5cm, minimum height=0.2cm, label=right:$S_d$] at (2.1,1.4){};

\end{tikzpicture}

\end{document}
