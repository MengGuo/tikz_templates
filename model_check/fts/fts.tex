\documentclass{article}

\usepackage{pgf}
\usepackage{tikz}

\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}
\setlength\PreviewBorder{4pt}


\usetikzlibrary{arrows,automata}
\usepackage[latin1]{inputenc}

% http://www.texample.net/tikz/examples/state-machine/


\begin{document}
\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=2.8cm,semithick]

  \node[initial,state,label={$\{r_0\}$}] (r0)         {$s_0$};
  \node[state,label={$\{r_1\}$}]         (r1) [above right of=r0]  {$s_1$};
  \node[state,label={$\{r_2\}$}]         (r2) [below right of=r0]  {$s_2$};
  \node[state,label={$\{r_3\}$}]         (r3) [below right of=r1]  {$s_3$};

  \path (r0) edge              node {1} (r1)
            edge              node {3} (r3)
        (r1) edge [loop right] node {1} (r1)
            edge              node {1} (r3)
        (r2) edge              node {1} (r0)
             edge [loop below]             node {1} (r0);

\draw[latex'-latex'] (r2) -- node {1} (r3);

\end{tikzpicture}

\end{document}
